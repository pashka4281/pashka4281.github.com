
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Node JS Ecosystem From Rails Developer Perspective - Part1 - WebJournal</title>
  <meta name="author" content="Pavlo Sirous">

  
  <meta name="description" content="That was a rainy night of Saturday when I was sitting down and reading some blog I found a notice about Node. Yay, now I know how to spend rest of &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://pashka4281.github.com/blog/2014/06/01/node-js-ecosystem-from-rails-developer-perspective-part1">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="WebJournal" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href='https://fonts.googleapis.com/css?family=Noto+Serif:400,700' rel='stylesheet' type='text/css'>
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>

  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-51542431-1', 'auto');
    ga('send', 'pageview');

  </script>



</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">WebJournal</a></h1>
  
    <h2>Useful notes about web development and other tech stuff.</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  
  
</ul>

<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="http://pavlosirous.com">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">Node JS Ecosystem From Rails Developer Perspective - Part1</h1>
    
    
      <p class="meta">
        








  


<time datetime="2014-06-01T04:50:00-04:00" pubdate data-updated="true">Jun 1<span>st</span>, 2014</time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://pashka4281.github.com">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p>That was a rainy night of Saturday when I was sitting down and reading some blog I found a notice about Node. Yay, now I know how to spend rest of the eve - I thought :)</p>

<p>Honestly saying, some time ago I have already made “first steps” in writing server side js using node, but that was so long ago so I decided to try again and go further that first time.</p>

<p>So let’s start from installing npm (node package manager - similar to gem from rails). I had it already installed but for those who just starting follow next steps (quote taken from ubuntu community).
<!-- more --></p>

<h2 id="step-1---installing-node">Step 1 - installing node</h2>

<p>Those are pretty easy and not involving compiling stuff:</p>

<blockquote>
  <p>You can use this node.js PPA:</p>

  <p><code>ppa:chris-lea/node.js</code></p>

  <p>If you’re on Ubuntu Server, first do this:</p>

  <p><code>$ sudo apt-get install python-software-properties</code></p>

  <p>Then, do this:</p>

  <p><code>$ sudo add-apt-repository ppa:chris-lea/node.js</code></p>

  <p><code>$ sudo apt-get update</code></p>

  <p><code>$ sudo apt-get install nodejs</code></p>

  <p>Then, you have the latest version of node.js installed.</p>
</blockquote>

<p>Then, check if node was installed correctly:</p>

<p><code>$ node -v</code></p>

<h2 id="step-2---install-npm">Step 2 - Install NPM</h2>

<p>Simply run the NPM install script:</p>

<p>curl https://npmjs.org/install.sh | sudo sh
And then check it works:</p>

<p>npm -v
That’s all.</p>

<h2 id="step-3---creating-basic-skeleton-of-you-very-first-node-web-app">Step 3 - Creating basic skeleton of you very first Node web app</h2>
<p>For accomplishing this step I strongly recommend to use ExpressJs - a small npm package (aka gem) that boost your node app with such nice features as routing, template handling (Jade by default –  very similar to haml) and some other useful stuff. Creating server with expressjs is also simple proccessas well as configuring it. Node app has no strict folders structure (as Rails do) but it nice to have some place to start of. There are plently much app template/seed projects available out there, let’s use on of them that contains basic blog application:</p>

<p><code>https://github.com/btford/angular-express-blog</code></p>

<p>(yeah-yeah you have already noticed this seed project includes AngularJS :) – we’ll get back to it a bit later )</p>

<p>So:</p>

<p><code>$ git clone https://github.com/btford/angular-express-blog.git &amp;&amp; cd angular-express-blog</code></p>

<p>Then run</p>

<p><code>$ npm install</code> to install all the app dependencies (this is similar to bundle install in rails. This command will install dependencies described in package.json file – node analog for Gemfile. You can edit it to add required libs/plugins)</p>

<p>This should run smoothly and finaly we’re able to run our app!
<code>$ node app.js</code></p>

<p><code>$ Express server listening on port 3000 in development mode</code></p>

<p>Now open your favourite browser and point it to http://localhost:3000</p>

<p>This is what you would see, your first hand-made Node js blog. We did it :) </p>

<p><img src="https://farm3.staticflickr.com/2906/14314489362_f2296fd5ab_b.jpg" alt="" /></p>

<h2 id="step-4---application-structure">Step 4 - application structure</h2>

<p>Basically the structure of the app skeleton we have copied looks like this:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">README.md
</span><span class="line">app.js              --&gt; app config
</span><span class="line">package.json        --&gt; <span class="k">for </span>npm
</span><span class="line">public/             --&gt; all of the files to be used in on the client side
</span><span class="line">  css/              --&gt; css files
</span><span class="line">    app.css         --&gt; default stylesheet
</span><span class="line">  img/              --&gt; image files
</span><span class="line">  js/               --&gt; javascript files
</span><span class="line">    app.js          --&gt; <span class="nb">declare </span>top-level app module
</span><span class="line">    controllers.js  --&gt; application controllers
</span><span class="line">    directives.js   --&gt; custom angular directives
</span><span class="line">    filters.js      --&gt; custom angular filters
</span><span class="line">    services.js     --&gt; custom angular services
</span><span class="line">    lib/            --&gt; angular and 3rd party JavaScript libraries
</span><span class="line">      angular/
</span><span class="line">        angular.js            --&gt; angular js
</span><span class="line">        angular.min.js        --&gt; minified angular js
</span><span class="line">        angular-*.js          --&gt; angular add-on modules
</span><span class="line">        version.txt           --&gt; version number
</span><span class="line">routes/
</span><span class="line">  api.js            --&gt; route <span class="k">for </span>serving JSON
</span><span class="line">  index.js          --&gt; route <span class="k">for </span>serving HTML pages and partials
</span><span class="line">views/
</span><span class="line">  index.jade        --&gt; main page <span class="k">for </span>app
</span><span class="line">  layout.jade       --&gt; doctype, title, head boilerplate
</span><span class="line">  partials/         --&gt; angular view partials <span class="o">(</span>partial jade templates<span class="o">)</span>
</span><span class="line">    addPost.jade
</span><span class="line">    deletePost.jade
</span><span class="line">    editPost.jade
</span><span class="line">    index.jade
</span><span class="line">    readPost.jade
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It’s pretty self-explanary, I’ll stop only for certain moments to clarify.
The main starting point of the app is actually app.js file. it combines some <code>require</code> statements to load external libs, code for setting up express server and define some config parameters to it (e.g. templating engine, running port, routes etc.).</p>

<h2 id="step-5---expressjs-routings">Step 5 - ExpressJS routings</h2>

<p>Special quote for routes. They have some differences comparing to Rails’s. The app.js contains routes only constraints but their definitions are placed under ./routes folder. 
Instead of mapping an http route to controller’s action (like rails do) express routes defines make rails controllers job as well: they define what to do with the request (e.g. redirect it) or what data should be sent for a particular request.
Consider example:</p>

<p>We requring definitions contained in ./routes/api.js file and place it to api variable
<code>var api = require('./routes/api');</code></p>

<p>Then to map <code>posts</code> definition to get request for ‘/api/posts’ path we do this:
<code>app.get('/api/posts', api.posts);</code></p>

<p>This would work since /routes/api.js contains definition named ‘posts’:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">exports.posts <span class="o">=</span> <span class="k">function</span> <span class="o">(</span>req, res<span class="o">)</span> <span class="o">{</span>
</span><span class="line">  var <span class="nv">posts</span> <span class="o">=</span> <span class="o">[]</span>;
</span><span class="line">  data.posts.forEach<span class="o">(</span><span class="k">function</span> <span class="o">(</span>post, i<span class="o">)</span> <span class="o">{</span>
</span><span class="line">    posts.push<span class="o">({</span>
</span><span class="line">      id: i,
</span><span class="line">      title: post.title,
</span><span class="line">      text: post.text.substr<span class="o">(</span>0, 50<span class="o">)</span> + <span class="s1">&#39;...&#39;</span>
</span><span class="line">    <span class="o">})</span>;
</span><span class="line">  <span class="o">})</span>;
</span><span class="line">  res.json<span class="o">({</span>
</span><span class="line">    posts: posts
</span><span class="line">  <span class="o">})</span>;
</span><span class="line"><span class="o">}</span>;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>So when client requests /api/posts via GET ‘posts’ function will be called.
The common format of the route definition fuction is
<code>function(req, res){ ... }</code></p>

<p>Req and res objects stands for Request and Response respectively. They have plently on methods to deal with request and response, but in our case we want to render json, this goal is accomplished by calling json function on res object and passing desired json as an argument:</p>

<p><code>function(req, res){ res.json({ foo: "bar" }) }</code></p>

<p>This way you can easily create json API for your client side code.
Another way of using routes - rendering templates. Example from our app you can inspecting <code>./routes/index.js</code> file.
Similar to rendering json but using ‘render’ function on res object:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line"><span class="k">function</span><span class="o">(</span>req, res<span class="o">){</span>
</span><span class="line">  res.render<span class="o">(</span><span class="s1">&#39;index&#39;</span><span class="o">)</span>;
</span><span class="line"><span class="o">}</span>;
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p>It would pick up and render template ‘index.jade’ under ./views folder.</p>

<h2 id="step-6---jade-templates">Step 6 - Jade templates</h2>
<p>More detailed info about jade templating language can be found here http://jade-lang.com/
It has similar to haml syntax so if you know how to write haml you’ll be easy to deal with jade. (Need to say, I’m sure you can find plugins for haml support as well).
Most important notice for us as rails developers - it supports layouts, partials and other good stuff we used to work with in Rails.</p>

<p>Jade layout should contain <code>block body</code> code. Thi is a place where templates will  be included:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">!!!
</span><span class="line">html<span class="o">(</span>ng-app<span class="o">=</span><span class="s2">&quot;myApp&quot;</span><span class="o">)</span>
</span><span class="line">  head
</span><span class="line">    meta<span class="o">(</span><span class="nv">charset</span><span class="o">=</span><span class="s1">&#39;utf8&#39;</span><span class="o">)</span>
</span><span class="line">    base<span class="o">(</span><span class="nv">href</span><span class="o">=</span><span class="s1">&#39;/&#39;</span><span class="o">)</span>
</span><span class="line">    title Angular Express Seed App
</span><span class="line">    link<span class="o">(</span><span class="nv">rel</span><span class="o">=</span><span class="s1">&#39;stylesheet&#39;</span>, <span class="nv">href</span><span class="o">=</span><span class="s1">&#39;/bower_components/bootstrap/dist/css/bootstrap.min.css&#39;</span><span class="o">)</span>
</span><span class="line">    link<span class="o">(</span><span class="nv">rel</span><span class="o">=</span><span class="s1">&#39;stylesheet&#39;</span>, <span class="nv">href</span><span class="o">=</span><span class="s1">&#39;/css/app.css&#39;</span><span class="o">)</span>
</span><span class="line">  body
</span><span class="line">    include shared/navbar
</span><span class="line">    .container
</span><span class="line">      block body
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>include shared/navbar</code> will include navbar.jade partial located inside ./views/shared folder.</p>

<p>BTW, if you’re using sublime2 as you text editor there is a simple tutorial of adding jade syntax highlighting to it:
&gt; Hit Command-Shift-P to open up the Command Palette, where you can type “install package”.   Hit enter and it will open up another search box.
&gt; Type “jade” and it should autocomplete to the Jade package.  Hit enter to install the package.
&gt; Restart Sublime Text 2.</p>

<p>That’s it for layouts. As for views, they should contain layout name which should be used for rendering:</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
</pre></td><td class="code"><pre><code class="sh"><span class="line">extends layout
</span><span class="line">
</span><span class="line">block body
</span><span class="line">  div.container
</span><span class="line">    Hello!
</span></code></pre></td></tr></table></div></figure></notextile></div>

<p><code>extend layout</code> here says that this view should be rendered under layout named “layout” :)</p>

<p>So that’s it for this post, in next posts I’ll tell you how angular works for this app, how to deal with assets using Bower, setting up database connection and even bringing some ORM functionality to you nodeJs app. Stay tuned!
Questions are really welcome :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Pavlo Sirous</span></span>

      








  


<time datetime="2014-06-01T04:50:00-04:00" pubdate data-updated="true">Jun 1<span>st</span>, 2014</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/epressjs/'>EpressJS</a>, <a class='category' href='/blog/categories/nodejs/'>NodeJs</a>, <a class='category' href='/blog/categories/ubuntu/'>Ubuntu</a>, <a class='category' href='/blog/categories/web/'>Web</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="//twitter.com/share" class="twitter-share-button" data-url="http://pashka4281.github.com/blog/2014/06/01/node-js-ecosystem-from-rails-developer-perspective-part1/" data-via="" data-counturl="http://pashka4281.github.com/blog/2014/06/01/node-js-ecosystem-from-rails-developer-perspective-part1/" >Tweet</a>
  
  
  
    <div class="fb-like" data-send="true" data-width="450" data-show-faces="false"></div>
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/05/10/first-steps-in-ruby-language/" title="Previous Post: First steps in Ruby language">&laquo; First steps in Ruby language</a>
      
      
        <a class="basic-alignment right" href="/blog/2014/06/07/how-to-boost-your-freelancer-profile-5-ultimate-tips/" title="Next Post: How to boost your freelancer profile: 5 ultimate tips">How to boost your freelancer profile: 5 ultimate tips &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

  <aside class="sidebar">
  
    <form action="http://google.com/search" method="get">
      <fieldset role="search">
        <input type="hidden" name="cx" value="000020124828116625693:xngkxnpz5h0" /> <!-- Google Custom Search engine ID -->
        <input class="search" type="text" name="q" results="0" placeholder="Search"/>
      </fieldset>
    </form>
  
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2017/01/14/updates-for-2016/">2016 Summary</a>
      </li>
    
      <li class="post">
        <a href="/blog/2016/01/11/how-to-host-a-static-website-using-amazon-s3-and-gulp-dot-js/">How to Host a Static Website Using Amazon S3 and gulp.js</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/10/17/das-keyboard-4c-profesional-review/">A Post About Mechanical Keyboards | Das Keyboard 4c Professional Review</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/08/03/mysql-gem-float-rounding/">Mysql Gem Float Rounding</a>
      </li>
    
      <li class="post">
        <a href="/blog/2015/07/29/night-work-plus-eyes-safety-equals-f-dot-lux/">Night Work + Eyes Safety = f.lux</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating...</li>
  </ul>
  
  <a href="https://github.com/pashka4281">@pashka4281</a> on GitHub
  
  <script type="text/javascript">
    $(document).ready(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'pashka4281',
            count: 5,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>






  
</aside>



    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2017 - Pavlo Sirous
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'pashka4281blog';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://pashka4281.github.com/blog/2014/06/01/node-js-ecosystem-from-rails-developer-perspective-part1/';
        var disqus_url = 'http://pashka4281.github.com/blog/2014/06/01/node-js-ecosystem-from-rails-developer-perspective-part1/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id; js.async = true;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>





  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = '//platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>



<script>
  $(document).ready(function() {  
  var stickyNavTop = $('nav').offset().top;  
    
  var stickyNav = function(){  
  var scrollTop = $(window).scrollTop();  
         
  if (scrollTop > stickyNavTop) {   
      $('nav').addClass('sticky');  
  } else {  
      $('nav').removeClass('sticky');   
  }  
  };  
    
  stickyNav();  
    
  $(window).scroll(function() {  
      stickyNav();  
  });  
  });  
</script>


</body>
</html>
